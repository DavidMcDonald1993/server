<!doctype html>
<html lang="en">

  <head>

    {% include 'header.html' %}

    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="http://cdn.datatables.net/1.10.2/css/jquery.dataTables.min.css">
  
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript"  src="http://cdn.datatables.net/1.10.2/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript"  src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>

    {% load static %}

    <script type="text/javascript"  src="{% static 'js/make_datatables.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/show_hidden.js' %}"></script>

    <script type="text/javascript" src="{% static 'natural_products/categories.js' %}"></script>

  </head>

  <body style="text-align: center;">

    {% include 'navbar.html' %}

    <div style="width:75%; margin:0 auto;">
    
      <div>
        <h1>{{compound_name}}</h1>
        <h2>Activities for Pa threshold: {{threshold}}</h2>
        <form action="/natural_products">
          <input type="submit" 
            value="Return to screening selection">
        </form>
      </div>

      <br>

      {% if img_filename %}
      <div>
      <h2>Molecule</h2>
        <img src="{% static img_filename %}" 
          style="width: 20%; height: 20%;" >
      </div>
      {% endif %}

      <br>

      <div class="hiddenDiv" style="display: none;">

        <div id="categorySidebar" class="sidenav sidenav-right">
          <a href="#Molecule_properties" onclick="showDiv(this)">Molecule Properties</a>
          {% if activities %}
          {% for category, category_activities in activities %}
          <a href="#{{category}}" onclick="showDiv(this)">{{category}}</a>
          {% endfor %}
          {% endif %}
          {% if pathways %}
          <a href="#Pathways" onclick="showDiv(this)">Pathways</a>
          {% endif %}
          {% if reactions %}
          <a href="#Reactions" onclick="showDiv(this)">Reactions</a>
          {% endif %}
        </div>

        <div> <!--class not used yet-->
    
        <div id="nav-#Molecule_properties" style="display: none;">
          
          <h2>Molecule Properties</h2>
          <table class="display table" style="width: 75%; margin:0 auto; text-align: left;">
            <thead>
            <tr>
              <th>Property Name</th>
              <th>Value</th>
            </tr>
          </thead>
          <tbody>
            {% for key, value in compound_info %}
            <tr>
              <td>{{key}}</td>
              <td>{{value}}</td>
            </tr>
            {% endfor %}
            </tbody>
          </table>
        </div>

        {% if activities %}
        
        {% for category, category_activities in activities %}

        <div id="nav-#{{category}}" style="display: none;">
              
          <h2>{{category}}</h2>
          <table id="{{category}}Table" class="display table data" 
              style="width:100%;text-align:center;display:inline;">
                    
            <thead>
              <tr>
                <th>Target</th>
                <th>Pa</th>
                <th>Pi</th>
                <th>Pa - Pi</th>
              </tr>
            </thead>
                    
            <tbody>
              {% for target, pa, pi, diff in category_activities %}
              <tr>
                <td>{{target}}</td>
                <td>{{pa}}</td>
                <td>{{pi}}</td>
                <td>{{diff}}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>

        {% endfor %}
        {% endif %}
        <!-- pathways -->
        <div id="nav-#Pathways"  style="display: none;">
        
          <h2>Pathways</h2>
          <table id="PathwaysTable" class="display table data"
              style="width:100%;text-align:center;display:inline;">
              
            <thead>
              <tr>
                <th>Uniprot ACCs</th>
                <th>Number Uniprot ACCs</th>
                <th>Total ACCs</th>
                <th>Uniprot Coverage</th>
                <th>Pathway Name</th>
                <th>Pathway Organism</th>
              </tr>
            </thead>
              
            <tbody>
              {% for accs, num_accs, total_accs, coverage, pathway_name, organism, url in pathways %}
              <tr>
                <td>{{accs}}</td>
                <td>{{num_accs}}</td>
                <td>{{total_accs}}</td>
                <td>{{coverage}}</td>
                <td><a href={{url}}>{{pathway_name}}</a></td>
                <td>{{organism}}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>

      <!-- reactions -->

      <div id="nav-#Reactions" style="display: none;">
      
        <h2>Reactions</h2>
        <table id="ReactionsTable" class="display table data"
          style="width:100%;text-align:center;display:inline;">
          
          <thead>
            <tr>
              <th>Uniprot ACCs</th>
              <th>Number Uniprot ACCs</th>
              <th>Total ACCs</th>
              <th>Uniprot Coverage</th>
              <th>Reaction Name</th>
              <th>Reaction Organism</th>
            </tr>
          </thead>
          
          <tbody>
            {% for accs, num_accs, total_accs, coverage, reaction_name, organism, url in reactions %}
            <tr>
              <td>{{accs}}</td>
              <td>{{num_accs}}</td>
              <td>{{total_accs}}</td>
              <td>{{coverage}}</td>
              <td><a href={{url}}>{{reaction_name}}</a></td>
              <td>{{organism}}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>

    </div>

  </body>
</html>
