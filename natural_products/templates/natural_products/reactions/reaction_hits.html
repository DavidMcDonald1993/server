<!doctype html>
<html lang="en">
  <head>

    {% include 'header.html' %}

    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="http://cdn.datatables.net/1.10.2/css/jquery.dataTables.min.css">

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript"  src="http://cdn.datatables.net/1.10.2/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript"  src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>

    {% load static %}
       
    <script type="text/javascript" src="{% static 'js/make_datatables.js' %}"></script>

    <script type="text/javascript" src="{% static 'js/show_hidden.js' %}"></script>

    <link rel="stylesheet" type="text/css" href="{% static 'css/tables.css' %}">
      
  </head>

  {% if show_images %}
  <body style="text-align: center;" onload="makeDataTable(['resultsTable'], [7, ])">
  {% else %}
  <body style="text-align: center;" onload="makeDataTable(['resultsTable'], [6, ])">
  {% endif %}
    {% include 'navbar.html' %}

    <div>
      <h1>Results</h1>
      <form action="/natural_products/reaction_selection/">
        <input type="submit" value="Back to reaction selection">
      </form>
    </div>

    <div class="hiddenDiv" style="display: none;">

      {% include 'hit_navbar.html' %}

      <div class="results-table">

        <div style="text-align: left;">
          <h2>Looking at hits for reactions(s): {{reactions}}</h2>
          <h3>Using threshold: {{threshold}}</h3> 
          <h3>Number of hit(s): {{num_hits}}</h3> 
        </div>

        <br>
    
        <div class="table-responsive">
          <table id=resultsTable class="display table data"
            style="width:100%;text-align:center;display:inline;">
            <thead>
              <tr>
                {% if show_images %}
                <th colspan="4" class="bd-left bd-right">Molecule</th>
                {% else %}
                <th colspan="3" class="bd-left bd-right">Molecule</th>
                {% endif %}
                {% for reaction in reactions %}
                <th colspan="6" class="bd-right">{{reaction}}</th>
                {% endfor %}
              </tr>
              <tr>
                {% if show_images %}
                <th class="bd-left">Image</th>
                {% endif %}
                <th class="bd-left">ID</th>
                <th>Compound Name</th>
                <th class="bd-right">Molecular Formula</th>
                <!-- <th>SMILES</th> -->
                {% for reaction in reactions %}
                <!-- <th>Target(s)</th> -->
                <!-- <th>Number Targets</th> -->
                <th>Uniprot ACC(s)</th>
                <th>Number Uniprot ACCs</th>
                <th>Total Uniprot ACCs</th>
                <th>Uniprot Coverage</th>
                <th>Reaction Name</th>
                <th class="bd-right">Organism</th>
                {% endfor %}
              </tr>
            </thead>
            <tbody>
              {% for hit in reaction_hits %}
              <tr>
                {% if show_images %}
                <td class="bd-left"> <img src="{% static hit.image %}" alt=""
                  style="width: 100pt; height: 100pt;"></img> </td>
                {% endif %}
                <td class="bd-left"> <a href="/natural_products/compounds/all/{{hit.id}}"> {{ hit.id }} </a> </td>
                <td> {{ hit.name }} </td>
                <td class="bd-right"> {{ hit.formula }} </td>
                <!-- <td> {{ hit.smiles }} </td> -->
                {% for reaction in hit.reactions %}
                <!-- <td> {{ reaction.targets }} </td> -->
                <!-- <td> {{ reaction.num_targets }} </td> -->
                <td> {{ reaction.accs }} </td>
                <td> {{ reaction.num_accs }} </td>
                <td> {{ reaction.total_accs }} </td>
                <td> {{ reaction.coverage }} </td>
                <td> <a href="{{reaction.url}}"> {{ reaction.reaction_name }} </a> </td>
                <td class="bd-right"> {{ reaction.organism }} </td>
                {% endfor %}
              </tr>
            {% endfor %}
            </tbody>
          </table>
        </div>
      </div>

    </div>
  </body>
</html>
