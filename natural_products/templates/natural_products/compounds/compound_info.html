<!doctype html>
<html lang="en">

  {% include 'header.html' %}
  {% load static %}
  <script type="text/javascript" src="{%static 'natural_products/js/categories.js' %}"></script>

  <body class="left right" onload="makeDataTable('all')">

    {% include 'navbar.html' %}
    
    <header>
      <h1>{{compound_name}}</h1>
      <h3>Kingdom: {{kingdom_name}}</h3>
      <h3>Found in species: {{species_name}}</h3>
      <p>Activities for Pa threshold: {{threshold}}</p>
    </header>

    <nav id="categorySidebar" class="sidenav sidenav-right">
      <div style="text-align: center;">
        <h2>Activities</h2>
      </div>
      <a href="#PROPERTIES" onclick="showDiv(this)">PROPERTIES</a>
      {% for category, category_activities in activities.items %}
      <a href="#{{category}}" onclick="showDiv(this)">{{category}}</a>
      {% endfor %}
      {% if uniprot_data %}
      {% for key in uniprot_data %}
      <a href="#{{key}}" onclick="showDiv(this)">{{key}}</a>
      {% endfor %}
      {% endif %}
    </nav>

    <main>

      {% if img_filename %}
      <div>
        <h2>2D Image</h2>
        <img src="{% static img_filename %}" 
          style="width: 20%; height: 20%;" >
      </div>
      {% endif %}

      <br>

      <div class="hiddenDiv" style="display: none;">

        <div id="nav-#PROPERTIES" style="display: inline;">
          
          <h2>Molecule Properties</h2>
          <table id="PROPERTIESTable" class="display table data" style="text-align: left;" >
            <thead>
            <tr>
              <th>Property Name</th>
              <th>Value</th>
            </tr>
          </thead>
          <tbody>
            {% for key, value in compound_info.items %}
            <tr>
              <td>{{key}}</td>
              <td>{{value}}</td>
            </tr>
            {% endfor %}
            </tbody>
          </table>
        </div>

        {% if activities %}
        
        {% for category, category_activities in activities.items %}

        <div id="nav-#{{category}}" style="display: none;">
              
          <h2>{{category}}</h2>
          <table id="{{category}}Table" class="display table data" 
              style="width:100%;text-align:center;display:inline;">
                    
            <thead>
              <tr>
                <th>Target</th>
                <!-- <th>Pa</th> -->
                <!-- <th>Pi</th> -->
                <th>Confidence Score</th>
              </tr>
            </thead>
                    
            <tbody>
              {% for target, target_encoded, pa, pi, confidence in category_activities %}
              <tr>
                <td><a href="/natural_products/targets/all/{{target_encoded}}">{{target}}</a></td>
                <!-- <td>{{pa}}</td> -->
                <!-- <td>{{pi}}</td> -->
                <td>{{confidence}}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
        {% endfor %}
        {% endif %}

        {% if uniprot_data %}

        {% for key, data in uniprot_data.items %}

        <div id="nav-#{{key}}"  style="display: none;">
        
          <h2>{{key}}</h2>
            <table id="{{key}}Table" class="display table data"
                style="width:100%;text-align:center;display:inline;">
                
              <thead>
                <tr>
                  {% for col in data.columns %}
                  <th>{{col}}</th>
                  {% endfor %}
                </tr>
              </thead>
                
              <tbody>
                {% for row in data.data %}
                <tr>
                  {% for col in data.columns %}
                  <td> {{ row|get_item:col }} </td>
                  {% endfor %}
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        {% endfor %}

        {% endif %}

      </div>

      <!-- drug -->

      <div id="nav-#DRUG" style="display: none;">
  
        <h2>Drug</h2>
        <table id="DRUGTable" class="display table data"
          style="width:100%;text-align:center;display:inline;">
          
          <thead>
            <tr>
              <th>Drug Name</th>
              <!-- <th>Drug INCHI</th> -->
              <!-- <th>Drug SMILES</th> -->
              <th>Drug Type</th>
              <th>Drug Class</th>
              <th>Drug Company</th>
              <th>Disease</th>
              <th>Drug Highest Status</th>
              <th>Target ACC</th>
              <th>Confidence</th>
              <th>Confidence Type</th>
              <th>Activity</th>
              <th>Reference</th>
            </tr>
          </thead>
          
          <tbody>
            {% for name, inchi, smiles, type, class, company, disease, status, acc, confidence, confidence_type, activity, reference in drugs %}
            <tr>
              <td>{{name}}</td>
              <!-- <td>{{inchi}}</td> -->
              <!-- <td>{{smiles}}</td> -->
              <td>{{type}}</td>
              <td>{{class}}</td>
              <td>{{company}}</td>
              <td>{{disease}}</td>
              <td>{{status}}</td>
              <td>{{acc}}</td>
              <td>{{confidence}}</td>
              <td>{{confidence_type}}</td>
              <td>{{activity}}</td>
              <td>{{reference}}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>

    <!-- disease -->

    <div id="nav-#DISEASE" style="display: none;">

      <h2>Diseases</h2>
      <table id="DISEASETable" class="display table data"
        style="width:100%;text-align:center;display:inline;">
        
        <thead>
          <tr>
            <th>Disease Name</th>
            <th>ICD</th>
            <th>Target ACC</th>
            <th>Confidence</th>
            <th>Confidence Type</th>
            <th>Clinical Status</th>
          </tr>
        </thead>
        
        <tbody>
          {% for name, icd, acc, confidence, confidence_type, status in diseases %}
          <tr>
            <td>{{name}}</td>
            <td>{{icd}}</td>
            <td>{{acc}}</td>
            <td>{{confidence}}</td>
            <td>{{confidence_type}}</td>
            <td>{{status}}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

    </main>

    <footer>
      <form action="/">
        <input type="submit" 
          value="Return to home">
      </form>
    </footer>

  </body>
</html>
