<!doctype html>
<html lang="en">

  {% include 'header.html' %}
  {% load static %}
  <script type="text/javascript" src="{%static 'natural_products/categories.js' %}"></script>

  <body class="left right" onload="makeDataTable(
      ['PROPERTIESTable', 'ALL_TARGETSTable', 
        'ANTITARGETSTable', 'EFFECTSTable', 'GENE_EXPRESSIONTable', 
        'MECHANISMSTable', 'METABOLISMTable', 'TOXICITYTable', 'TRANSPORTERSTable',
        'PREDICTEDUNIPROTTable', 'INFERREDUNIPROTTable', 
        'PATHWAYSTable', 'REACTIONSTable',
        'DRUGTable', 'DISEASETable'
      ], 
      [0, 1, 1, 1, 1, 1, 1, 1, 1, 4, 5, 5, 5, 0, 0])">

    {% include 'navbar.html' %}
    
    <header>
      <h1>{{compound_name}}</h1>
      <p>Activities for Pa threshold: {{threshold}}</p>
    </header>

    <nav id="categorySidebar" class="sidenav sidenav-right">
      <div style="text-align: center;">
        <h2>Activities</h2>
      </div>
      <a href="#PROPERTIES" onclick="showDiv(this)">PROPERTIES</a>
      {% for category, category_activities in activities.items %}
      <a href="#{{category}}" onclick="showDiv(this)">{{category}}</a>
      {% endfor %}
      <a href="#PREDICTEDUNIPROT" onclick="showDiv(this)">UNIPROT(predicted)</a>
      <a href="#INFERREDUNIPROT" onclick="showDiv(this)">UNIPROT(inferred)</a>
      <a href="#PATHWAYS" onclick="showDiv(this)">PATHWAYS</a>
      <a href="#REACTIONS" onclick="showDiv(this)">REACTIONS</a>
      <a href="#DRUG" onclick="showDiv(this)">DRUGS</a>
      <a href="#DISEASE" onclick="showDiv(this)">DISEASES</a>
    </nav>

    <main>

      {% if img_filename %}
      <div>
        <h2>2D Image</h2>
        <img src="{% static img_filename %}" 
          style="width: 20%; height: 20%;" >
      </div>
      {% endif %}

      <br>

      <div class="hiddenDiv" style="display: none;">

        <div id="nav-#PROPERTIES" style="display: inline;">
          
          <h2>Molecule Properties</h2>
          <table id="PROPERTIESTable" class="display-table" >
            <thead>
            <tr>
              <th>Property Name</th>
              <th>Value</th>
            </tr>
          </thead>
          <tbody>
            {% for key, value in compound_info.items %}
            <tr>
              <td>{{key}}</td>
              <td>{{value}}</td>
            </tr>
            {% endfor %}
            </tbody>
          </table>
        </div>

        {% if activities %}
        
        {% for category, category_activities in activities.items %}

        <div id="nav-#{{category}}" style="display: none;">
              
          <h2>{{category}}</h2>
          <table id="{{category}}Table" class="display table data" 
              style="width:100%;text-align:center;display:inline;">
                    
            <thead>
              <tr>
                <th>Target</th>
                <!-- <th>Pa</th> -->
                <!-- <th>Pi</th> -->
                <th>Confidence Score</th>
              </tr>
            </thead>
                    
            <tbody>
              {% for target, target_encoded, pa, pi, diff in category_activities %}
              <tr>
                <td><a href="/natural_products/targets/all/{{target_encoded}}">{{target}}</a></td>
                <!-- <td>{{pa}}</td> -->
                <!-- <td>{{pi}}</td> -->
                <td>{{diff}}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
        {% endfor %}
        {% endif %}

        <!-- predicted uniprots -->

        <div id="nav-#PREDICTEDUNIPROT"  style="display: none;">
        
        <h2>Pathways</h2>
          <table id="PREDICTEDUNIPROTTable" class="display table data"
              style="width:100%;text-align:center;display:inline;">
              
            <thead>
              <tr>
                <th>Uniprot ACC</th>
                <th>Protein</th>
                <th>Genes</th>
                <th>Organism</th>
                <th>Confidence</th>
              </tr>
            </thead>
              
            <tbody>
              {% for acc, protein, gene, organism, confidence in predicted_uniprots %}
              <tr>
                <td>{{acc}}</td>
                <td>{{protein}}</td>
                <td>{{gene}}</td>
                <td>{{organism}}</td>
                <td>{{confidence}}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>

    <!-- inferred uniprots -->

    <div id="nav-#INFERREDUNIPROT"  style="display: none;">
        
      <h2>Pathways</h2>
        <table id="INFERREDUNIPROTTable" class="display table data"
            style="width:100%;text-align:center;display:inline;">
            
          <thead>
            <tr>
              <th>Uniprot ACC</th>
              <th>Protein</th>
              <th>Genes</th>
              <th>Organism</th>
              <th>Associated Targets</th>
              <th>Mean Confidence</th>
            </tr>
          </thead>
            
          <tbody>
            {% for acc, protein, gene, organism, targets, confidence in inferred_uniprots %}
            <tr>
              <td>{{acc}}</td>
              <td>{{protein}}</td>
              <td>{{gene}}</td>
              <td>{{organism}}</td>
              <td>{{targets}}</td>
              <td>{{confidence}}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>


        <!-- pathways -->
        <div id="nav-#PATHWAYS"  style="display: none;">
        
          <h2>Pathways</h2>
          <table id="PATHWAYSTable" class="display table data"
              style="width:100%;text-align:center;display:inline;">
              
            <thead>
              <tr>
                <th>Pathway Name</th>
                <th>Pathway Organism</th>
                <th>Uniprot ACCs</th>
                <th>Number Uniprot ACCs</th>
                <th>Total ACCs</th>
                <th>Uniprot Coverage</th>
                <th>Reactome URL</th>
              </tr>
            </thead>
              
            <tbody>
              {% for accs, num_accs, total_accs, coverage, pathway_name, pathway_name_encoded, organism, organism_encoded, url in pathways %}
              <tr>
                <td><a href="/natural_products/pathways/all/{{pathway_name_encoded}}:_:{{organism_encoded}}">{{pathway_name}}</a></td>
                <td>{{organism}}</td>
                <td>{{accs}}</td>
                <td>{{num_accs}}</td>
                <td>{{total_accs}}</td>
                <td>{{coverage}}</td>
                <td><a href="{{url}}">{{url}}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>

        <!-- reactions -->

        <div id="nav-#REACTIONS" style="display: none;">
      
          <h2>Reactions</h2>
          <table id="REACTIONSTable" class="display table data"
            style="width:100%;text-align:center;display:inline;">
            
            <thead>
              <tr>
                <th>Reaction Name</th>
                <th>Reaction Organism</th>
                <th>Uniprot ACCs</th>
                <th>Number Uniprot ACCs</th>
                <th>Total ACCs</th>
                <th>Uniprot Coverage</th>
                <th>Reactome URL</th>
              </tr>
            </thead>
            
            <tbody>
              {% for accs, num_accs, total_accs, coverage, reaction_name, reaction_name_encoded, organism, organism_encoded, url in reactions %}
              <tr>
                <td><a href="/natural_products/reactions/all/{{reaction_name_encoded}}:_:{{organism_encoded}}">{{reaction_name}}</a></td>
                <td>{{organism}}</td>
                <td>{{accs}}</td>
                <td>{{num_accs}}</td>
                <td>{{total_accs}}</td>
                <td>{{coverage}}</td>
                <td><a href="{{url}}">{{url}}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>

      <!-- drug -->

      <div id="nav-#DRUG" style="display: none;">
  
        <h2>Drug</h2>
        <table id="DRUGTable" class="display table data"
          style="width:100%;text-align:center;display:inline;">
          
          <thead>
            <tr>
              <th>Drug Name</th>
              <!-- <th>Drug INCHI</th> -->
              <!-- <th>Drug SMILES</th> -->
              <th>Drug Type</th>
              <th>Drug Class</th>
              <th>Drug Company</th>
              <th>Disease</th>
              <th>Drug Highest Status</th>
              <th>Target ACC</th>
              <th>Confidence</th>
              <th>Confidence Type</th>
              <th>Activity</th>
              <th>Reference</th>
            </tr>
          </thead>
          
          <tbody>
            {% for name, inchi, smiles, type, class, company, disease, status, acc, confidence, confidence_type, activity, reference in drugs %}
            <tr>
              <td>{{name}}</td>
              <!-- <td>{{inchi}}</td> -->
              <!-- <td>{{smiles}}</td> -->
              <td>{{type}}</td>
              <td>{{class}}</td>
              <td>{{company}}</td>
              <td>{{disease}}</td>
              <td>{{status}}</td>
              <td>{{acc}}</td>
              <td>{{confidence}}</td>
              <td>{{confidence_type}}</td>
              <td>{{activity}}</td>
              <td>{{reference}}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>

    <!-- disease -->

    <div id="nav-#DISEASE" style="display: none;">

      <h2>Diseases</h2>
      <table id="DISEASETable" class="display table data"
        style="width:100%;text-align:center;display:inline;">
        
        <thead>
          <tr>
            <th>Disease Name</th>
            <th>ICD</th>
            <th>Target ACC</th>
            <th>Confidence</th>
            <th>Confidence Type</th>
            <th>Clinical Status</th>
          </tr>
        </thead>
        
        <tbody>
          {% for name, icd, acc, confidence, confidence_type, status in diseases %}
          <tr>
            <td>{{name}}</td>
            <td>{{icd}}</td>
            <td>{{acc}}</td>
            <td>{{confidence}}</td>
            <td>{{confidence_type}}</td>
            <td>{{status}}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

    </main>

    <footer>
      <form action="/">
        <input type="submit" 
          value="Return to home">
      </form>
    </footer>

  </body>
</html>
